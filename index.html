<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ›ãƒ¼ãƒ  - ç”Ÿæˆç«‹ä½“é€ å½¢å±•</title>
    <!-- â–¼â–¼â–¼ ã‚µã‚¤ãƒˆã‚¢ã‚¤ã‚³ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’èª¿æ•´ â–¼â–¼â–¼ -->
    <link rel="icon" href="data:image/svg+xml,<svg width='32' height='32' viewBox='0 0 32 32' xmlns='http://www.w3.org/2000/svg'><path d='M 16 4 L 27 10 V 22 L 16 28 L 5 22 V 10 L 16 4 Z M 5 10 L 16 16 L 27 10 M 16 16 V 28' stroke='%23f3d773' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'/></svg>">
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts for stylish font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* Custom styles for the luxury feel */
        body {
            font-family: 'Noto Serif JP', serif;
            /* â–¼â–¼â–¼ èƒŒæ™¯è‰²ã‚’ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¤‰æ›´ â–¼â–¼â–¼ */
            background-image: linear-gradient(to bottom, #222, #111);
            color: #f0f0f0;
        }

        header {
            position: relative; /* ç–‘ä¼¼è¦ç´ ã‚’é…ç½®ã™ã‚‹åŸºæº–ç‚¹ã¨ã—ã¦å¿…è¦ */
            /* â–¼â–¼â–¼ èƒŒæ™¯è‰²ã‚’ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«å¤‰æ›´ â–¼â–¼â–¼ */
            background-image: linear-gradient(to bottom, #8a5a2e, #78431e);
            /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®ä¸‹å´ä¸¡è§’ã‚’ä¸¸ã‚ã‚‹ */
            border-bottom-left-radius: 16px;
            border-bottom-right-radius: 16px;
        }
        
        /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®å†…å´ã«Uå­—ã®ç ´ç·šã‚’æç”»ã™ã‚‹ãŸã‚ã®ç–‘ä¼¼è¦ç´  */
        header::after {
            content: '';
            position: absolute;
            /* ç ´ç·šã®ãƒœãƒƒã‚¯ã‚¹ã‚’é…ç½® */
            top: 0;
            bottom: 5px; /* ãƒ˜ãƒƒãƒ€ãƒ¼ä¸‹ç«¯ã‹ã‚‰ã®è·é›¢ */
            left: 0.4rem;  /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®å·¦å³paddingã«åˆã‚ã›ã‚‹ */
            right: 0.4rem; /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®å·¦å³paddingã«åˆã‚ã›ã‚‹ */
            
            /* ä¸Šä»¥å¤–ã®3è¾ºã«ç ´ç·šã‚’è¨­å®š */
            border-left: 2px dashed #f3d773;
            border-right: 2px dashed #f3d773;
            border-bottom: 2px dashed #f3d773;
            border-top: none;

            /* ç ´ç·šè‡ªä½“ã®è§’ã‚’ä¸¸ã‚ã‚‹ */
            border-bottom-left-radius: 10px;
            border-bottom-right-radius: 10px;

            pointer-events: none; /* ç–‘ä¼¼è¦ç´ ãŒã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’å¦¨ã’ãªã„ã‚ˆã†ã«ã™ã‚‹ */
        }

        .icon-link svg {
            transition: fill 0.3s ease, transform 0.3s ease;
            fill: #ffffff; /* text-gray-400 */
        }
        .icon-link:hover svg {
            fill: #9ca3af; /* white */
            transform: scale(1.1);
        }

        /* Main image container with aspect ratio */
        .image-container {
            position: relative;
            width: 100%;
            /* 16:9 Aspect Ratio */
            padding-top: 56.25%; 
        }

        .main-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* ç”»åƒãŒã‚³ãƒ³ãƒ†ãƒŠã«åã¾ã‚‹ã‚ˆã†ã«èª¿æ•´ */
            transition: opacity 0.3s ease-in-out;
        }
        
        #work-title, #work-description, #image-caption, #work-link-container, #node-section {
            transition: opacity 0.3s ease-in-out;
        }


        /* Navigation arrows */
        .arrow {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2.5rem;
            color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: color 0.3s ease;
            user-select: none; /* ãƒ†ã‚­ã‚¹ãƒˆé¸æŠã‚’é˜²ã */
            padding: 1rem;
            z-index: 10;
        }

        .arrow:hover {
            color: rgba(255, 255, 255, 1);
        }

        .arrow-left {
            left: -4rem;
        }

        .arrow-right {
            right: -4rem;
        }
        
        /* Thumbnails for image switching */
        .thumbnail-container {
            display: flex;
            gap: 0.75rem; /* 12px */
            margin-top: 1rem; /* 16px */
            justify-content: center;
        }
        
        .thumbnail {
            width: 80px;
            height: 45px;
            object-fit: cover;
            cursor: pointer;
            border: 2px solid transparent;
            border-radius: 4px;
            transition: border-color 0.3s ease, transform 0.3s ease;
            opacity: 0.6;
        }

        .thumbnail:hover {
            transform: scale(1.05);
            opacity: 1;
        }
        
        .thumbnail.active {
            border-color: #fff;
            opacity: 1;
        }
        
        /* â–¼â–¼â–¼ ä¸¸å°ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã®ã‚¹ã‚¿ã‚¤ãƒ« â–¼â–¼â–¼ */
        .pagination-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.4);
            transition: background-color 0.3s ease-in-out;
        }
        .pagination-dot.active {
            background-color: #f3d773;
        }

        /* â–¼â–¼â–¼ ãƒ¢ãƒ¼ãƒ€ãƒ«ã¨æ‹¡å¤§è¡¨ç¤ºç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« â–¼â–¼â–¼ */
        #node-image {
            cursor: zoom-in;
        }
        #modal-image {
            transition: transform 0.3s ease-in-out;
            transform-origin: center center;
            cursor: zoom-out;
        }
        #modal-image.zoomed {
            transform: scale(2.5);
            cursor: grab;
        }
    </style>
</head>
<body class="bg-stone-800 text-white">

    <header class="w-full pt-4 pb-8 px-8 md:px-12 flex justify-between items-center fixed top-0 left-0 z-20">
        <!-- â–¼â–¼â–¼ ã‚¿ã‚¤ãƒˆãƒ«ã¨æ¦‚è¦ãƒªãƒ³ã‚¯ã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ– â–¼â–¼â–¼ -->
        <div class="flex items-center gap-10">
            <a href="index.html" class="text-5xl font-bold tracking-wider">ç”Ÿæˆç«‹ä½“é€ å½¢å±•</a>
            <!-- â–¼â–¼â–¼ ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆç”¨ã®ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ  â–¼â–¼â–¼ -->
            <a href="about.html" class="text-2xl hover:text-gray-300 transition duration-300 ease-in-out inline-block hover:scale-110">æ¦‚è¦</a>
        </div>
        <a href="https://github.com/mimisukeMaster" target="_blank" rel="noopener noreferrer" class="icon-link" aria-label="GitHub profile">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
        </a>
    </header>

    <main id="portfolio" class="min-h-screen flex flex-wrap content-start justify-center p-4 md:p-8 pt-32 md:pt-40">
        
        <!-- Left Side: Image Viewer -->
        <div class="w-full md:w-3/5 lg:w-1/2 flex-shrink-0 relative px-8 md:px-12">
            <div id="image-viewer" class="relative">
                <div class="image-container bg-black rounded-lg">
                    <img id="main-image" src="" alt="Main artwork image" class="main-image rounded-lg">
                </div>

                <!-- Work Navigation Arrows -->
                <div id="prev-work" class="arrow arrow-left">â—€</div>
                <div id="next-work" class="arrow arrow-right">â–¶</div>
            </div>
             <!-- Image Thumbnails -->
            <div id="thumbnail-container" class="thumbnail-container">
                <!-- Thumbnails will be generated by JavaScript -->
            </div>
            <!-- â–¼â–¼â–¼ ä¸¸å°ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã‚’è¡¨ç¤ºã™ã‚‹ã‚¨ãƒªã‚¢ â–¼â–¼â–¼ -->
            <div id="pagination-dots" class="flex justify-center items-center gap-3 mt-4 h-6">
                <!-- Dots will be generated by JavaScript -->
            </div>
            <p id="image-caption" class="text-center text-gray-400 h-6"></p>
        </div>

        <!-- Right Side: Title & Description -->
        <div class="w-full md:w-2/5 lg:w-1/3 mt-8 md:mt-0 md:pl-8">
            <h1 id="work-title" class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4"></h1>
            <p id="work-description" class="text-base leading-relaxed text-gray-300"></p>
            <!-- â–¼â–¼â–¼ Wikipediaãƒªãƒ³ã‚¯ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒ†ãƒŠ â–¼â–¼â–¼ -->
            <div id="work-link-container" class="mt-6">
                <!-- Link will be generated by JavaScript -->
            </div>
        </div>

        <!-- â–¼â–¼â–¼ Geometry Node Section â–¼â–¼â–¼ -->
        <div id="node-section" class="w-full lg:w-10/12 xl:w-3/4 mt-16 px-8 md:px-12">
            <h2 class="text-2xl font-bold mb-4 text-gray-300">ã“ã®ä½œå“ã‚’æ§‹æˆã™ã‚‹ã‚¸ã‚ªãƒ¡ãƒˆãƒªãƒãƒ¼ãƒ‰</h2>
            <p class="text-base leading-relaxed text-gray-300 pb-1">ğŸ”ã‚¯ãƒªãƒƒã‚¯ã§æ‹¡å¤§</p>
            <div class="bg-emerald-900 rounded-lg p-0.5">
                <img id="node-image" src="" alt="Geometry Node setup for the artwork" class="w-full h-auto rounded-md">
            </div>
        </div>

    </main>

    <!-- â–¼â–¼â–¼ Fullscreen Image Modal â–¼â–¼â–¼ -->
    <div id="modal" class="hidden fixed top-0 left-0 z-50 w-full h-full bg-black/90 flex items-center justify-center">
        <span id="modal-close" class="absolute top-5 right-8 text-white text-5xl font-bold cursor-pointer hover:text-gray-400 transition-colors">&times;</span>
        <img id="modal-image" src="" alt="Enlarged geometry node setup" class="max-w-[90%] max-h-[90%] object-contain">
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- ä½œå“ãƒ‡ãƒ¼ã‚¿ã‚’ã“ã“ã«è¿½åŠ ãƒ»ç·¨é›†ã—ã¦ãã ã•ã„ ---
            const worksData = [
                {
                    title: "ã‚¸ãƒ£ã‚¤ãƒ­ã‚¤ãƒ‰ (Gyroid)",
                    description: "ã‚¸ãƒ£ã‚¤ãƒ­ã‚¤ãƒ‰ã¯ã€é™°é–¢æ•° sinxcosy + sinycosz + sinzcosx = 0 ã‚’3æ¬¡å…ƒç©ºé–“ã«è¡¨ã—ãŸã‚‚ã®ã§ã™ã€‚æ›²é¢ã«ã‚ˆã£ã¦åˆ†ã‘ã‚‰ã‚ŒãŸç©ºé–“åŒå£«ã¯ã€ã©ã“ã¾ã§ã‚‚äº¤ã‚ã‚‰ãªã„ã¨ã„ã†ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ä½œå“ã§ã¯ã€æ›²é¢ã«åšã¿ã‚’ã‚‚ãŸã›ã‚‹ãŸã‚è¡¨é¢å‘¨è¾ºã®ã‚ãšã‹ãªç¯„å›²ã‚‚å«ã‚ã¦æç”»ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚",
                    images: [
                        { src: "images/work1/Gyroid.png", caption: "ã‚¿ã‚¤ãƒ—ï¼‘" },
                        { src: "images/work1/Gyroid_glass.png", caption: "ã‚¿ã‚¤ãƒ—ï¼’" },
                        { src: "images/work1/Gyroid_wireframe.png", caption: "ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ " },
                    ],
                    link: "https://ja.wikipedia.org/wiki/%E3%82%B8%E3%83%A3%E3%82%A4%E3%83%AD%E3%82%A4%E3%83%89",
                    nodeImage: "images/work1/Gyroid_node.png"
                },
                {
                    title: "ãƒ¡ãƒ³ã‚¬ãƒ¼ã®ã‚¹ãƒãƒ³ã‚¸ (Menger Sponge)",
                    description: "å†å¸°çš„ã«å‡¦ç†ã‚’è¡Œã£ã¦ã„ãã“ã¨ã§å½¢æˆã•ã‚Œã‚‹ã€ãƒ•ãƒ©ã‚¯ã‚¿ãƒ«æ§‹é€ ã‚’ã‚‚ã£ãŸç«‹ä½“ã§ã™ã€‚æ•°å­¦çš„ã«ã¯ä½“ç©ãŒ0ã«åæŸã—è¡¨é¢ç©ã¯ç„¡é™å¤§ã«ç™ºæ•£ã™ã‚‹ã¨ã„ã†éå¸¸ã«é¢ç™½ã„ç‰¹å¾´ã‚’æŒã£ã¦ã„ã¾ã™ã€‚ã“ã®ä½œå“ã§ã¯ã€æç”»æ™‚ã®å‡¦ç†ã‚’è€ƒæ…®ã—ã¦åå¾©å›æ•°ã¯5å›ã«ç•™ã‚ã¦ã„ã¾ã™ã€‚",
                    images: [
                        { src: "images/work2/MengerSponge_soft.jpg", caption: "ã‚¿ã‚¤ãƒ—ï¼‘" },
                        { src: "images/work2/MengerSponge_hard.jpg", caption: "ã‚¿ã‚¤ãƒ—ï¼’" },
                        { src: "images/work2/MengerSponge_enlarged.jpg", caption :"æ‹¡å¤§å†™çœŸ"}
                    ],
                    link: "https://ja.wikipedia.org/wiki/%E3%83%A1%E3%83%B3%E3%82%AC%E3%83%BC%E3%81%AE%E3%82%B9%E3%83%9D%E3%83%B3%E3%82%B8",
                    nodeImage: "images/work2/MengerSponge_node.png"
                },
                {
                    title: "ã‚¢ãƒ³ãƒ“ãƒªãƒƒã‚¯ãƒ»ãƒˆãƒ¼ãƒ©ã‚¹ (Umbilic Torus)",
                    description: "è¾ºã¨é¢ãŒãã‚Œãã‚Œ1ã¤ãšã¤ã—ã‹å­˜åœ¨ã›ãšã€é¢ã‚’è¾¿ã£ã¦ã„ãã¨å…ƒã®å ´æ‰€ã«æˆ»ã£ã¦ãã‚‹ã¨ã„ã†ä¸æ€è­°ãªæ§‹é€ ã‚’ã—ãŸç«‹ä½“ã§ã™ã€‚ç«‹ä½“ã®ä¸­å¿ƒã‚’åŸç‚¹ã«ç½®ã„ãŸã¨ãã€å„åº§æ¨™ã®3æˆåˆ†ã‚’ãã‚Œãã‚Œ2ã¤ã®åª’ä»‹å¤‰æ•°ã§è¡¨ã™ã“ã¨ãŒã§ãã¾ã™ã€‚æœ‰åãªã€Œãƒ¡ãƒ“ã‚¦ã‚¹ã®è¼ªã€ã«ä¼¼ã¦ã„ã¾ã™ãŒã€æ§‹é€ ï¼ˆãƒˆãƒãƒ­ã‚¸ãƒ¼ã«ãŠã‘ã‚‹å‘ãä»˜ã‘å¯èƒ½æ€§ï¼‰ãŒç•°ãªã‚Šã¾ã™ã€‚",
                    images: [
                        { src: "images/work3/UmbilicTorus_03.jpg", caption: "ã‚¿ã‚¤ãƒ—ï¼‘" },
                        { src: "images/work3/UmbilicTorus_04.jpg", caption: "ã‚¿ã‚¤ãƒ—ï¼’" },
                        { src: "images/work3/UmbilicTorus_03_wire.png", caption: "ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ " },
                    ],
                    link: "https://ja.wikipedia.org/wiki/%E3%82%A2%E3%83%B3%E3%83%93%E3%83%AA%E3%83%83%E3%82%AF%E3%83%BB%E3%83%88%E3%83%BC%E3%83%A9%E3%82%B9",
                    nodeImage: "images/work3/UmbilicTorus_node.png"
                },
                {
                    title: "ã‚ªãƒ­ã‚¤ãƒ‰ (Oloid)",
                    description: "2ã¤ã®å††ã®å‡¸åŒ…ã§å½¢æˆã•ã‚ŒãŸç«‹ä½“ã§ã™ã€‚è»¢ãŒã‚‹ã¨ãå…¨ã¦ã®é¢ãŒåœ°é¢ã«æ¥ã™ã‚‹ã¨ã„ã†é¢ç™½ã„æ€§è³ªã‚’æŒã£ã¦ã„ã¾ã™ã€‚é‡å¿ƒãŒä¸Šä¸‹ã™ã‚‹ã®ã§ã€ã†ã­ã†ã­ã¨ç§»å‹•ã™ã‚‹ã®ã‚‚è¦‹ã¦ã„ã¦èˆˆå‘³æ·±ã„ã§ã™ã€‚è¡¨é¢ç©ã¯ã€åˆã‚ã•ã£ã¦ã„ã‚‹å††ã¨åŒã˜åŠå¾„ã‚’æŒã¤çƒã®è¡¨é¢ç©ã«ç­‰ã—ããªã‚Šã¾ã™ã€‚",
                    images: [
                        { src: "images/work4/Oloid_01.png", caption: "ã‚¿ã‚¤ãƒ—ï¼‘" },
                        { src: "images/work4/Oloid_02.png", caption: "ã‚¿ã‚¤ãƒ—ï¼’" },
                        { src: "images/work4/Oloid_02_wire.png", caption: "ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ " },
                    ],
                    link: "https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%AD%E3%82%A4%E3%83%89",
                    nodeImage: "images/work4/Oloid_node.png"
                },
                {
                    title: "ã‚¯ãƒ¬ãƒ–ã‚·ãƒ¥æ›²é¢ (Clebsch Surface)",
                    description: "é™°é–¢æ•° x<sup>3</sup> + y<sup>3</sup> + z<sup>3</sup> + 1 - (x + y + z + 1)<sup>3</sup> = 0 ã§è¡¨ã•ã‚Œã‚‹æ›²é¢ã§ã™ã€‚æ›²é¢ä¸Šã«27æœ¬ã®ç›´ç·šãŒå®Œå…¨ã«å«ã¾ã‚Œã¦ã„ã‚‹ã¨ã„ã†é¢ç™½ã„ç‰¹å¾´ã‚’ã‚‚ã£ãŸæ§‹é€ ã‚’ã—ã¦ã„ã¾ã™ã€‚ã‚¸ãƒ£ã‚¤ãƒ­ã‚¤ãƒ‰ã¨åŒã˜ãã€æ›²é¢ã«åšã¿ã‚’æŒãŸã›ã‚‹ãŸã‚ç”Ÿæˆæ™‚ã«ä¸€éƒ¨åŠ å·¥ã‚’æ–½ã—ã¦ã„ã¾ã™ã€‚",
                    images: [
                        { src: "images/work5/ClebschSurface_02.png", caption: "ã‚¿ã‚¤ãƒ—ï¼‘" },
                        { src: "images/work5/ClebschSurface_03.png", caption: "ã‚¿ã‚¤ãƒ—ï¼’" },
                        { src: "images/work5/ClebschSurface_02_wire.png", caption: "ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ " },
                    ],
                    link: "https://en.wikipedia.org/wiki/Clebsch_surface",
                    nodeImage: "images/work5/ClebschSurface_node.png"
                },
                // --- æ–°ã—ã„ä½œå“ã¯ã€ã“ã®ä¸Šã«è¿½åŠ ã—ã¦ãã ã•ã„ ---
            ];

            // DOM Elements
            const mainImage = document.getElementById('main-image');
            const workTitle = document.getElementById('work-title');
            const workDescription = document.getElementById('work-description');
            const thumbnailContainer = document.getElementById('thumbnail-container');
            const imageCaption = document.getElementById('image-caption');
            const workLinkContainer = document.getElementById('work-link-container');
            const paginationDots = document.getElementById('pagination-dots');
            const nodeSection = document.getElementById('node-section');
            const nodeImage = document.getElementById('node-image');
            const prevWorkBtn = document.getElementById('prev-work');
            const nextWorkBtn = document.getElementById('next-work');
            const modal = document.getElementById('modal');
            const modalImage = document.getElementById('modal-image');
            const modalClose = document.getElementById('modal-close');
            
            // State
            let currentWorkIndex = 0;

            // â–¼â–¼â–¼ ä¸¸å°ï¼ˆãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã‚’åˆæœŸç”Ÿæˆã™ã‚‹å‡¦ç† â–¼â–¼â–¼
            worksData.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.classList.add('pagination-dot');
                paginationDots.appendChild(dot);
            });

            // Functions
            function loadWork(index) {
                if (index < 0 || index >= worksData.length) return;
                
                const work = worksData[index];

                // â–¼â–¼â–¼ ä¸¸å°ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–° â–¼â–¼â–¼
                Array.from(paginationDots.children).forEach((dot, dotIndex) => {
                    dot.classList.toggle('active', dotIndex === index);
                });
                
                mainImage.style.opacity = 0;
                workTitle.style.opacity = 0;
                workDescription.style.opacity = 0;
                imageCaption.style.opacity = 0;
                workLinkContainer.style.opacity = 0;
                nodeSection.style.opacity = 0;

                setTimeout(() => {
                    // Update content
                    workTitle.textContent = work.title;
                    workDescription.innerHTML = work.description;

                    // Wikipedia Link
                    workLinkContainer.innerHTML = ''; // Clear previous link
                    if (work.link) {
                        const linkEl = document.createElement('a');
                        linkEl.href = work.link;
                        linkEl.target = '_blank';
                        linkEl.rel = 'noopener noreferrer';
                        linkEl.className = 'inline-flex items-center gap-2 text-gray-300 hover:text-white transition-colors';
                        linkEl.innerHTML = `
                            <span class="text-lg"><u>ã‚‚ã£ã¨çŸ¥ã‚‹ (Wikipedia)</u></span>
                            <img src="https://upload.wikimedia.org/wikipedia/commons/8/80/Wikipedia-logo-v2.svg" alt="Wikipedia Logo" width="30">
                        `;
                        workLinkContainer.appendChild(linkEl);
                    }

                    // Geometry Node Image
                    if (work.nodeImage) {
                        nodeImage.src = work.nodeImage;
                        nodeSection.style.display = 'block';
                    } else {
                        nodeSection.style.display = 'none';
                    }


                    // Load first image of the work
                    mainImage.src = work.images[0].src;
                    imageCaption.textContent = work.images[0].caption || '';
                    mainImage.alt = work.title;

                    // Generate thumbnails
                    thumbnailContainer.innerHTML = ''; // Clear previous thumbnails
                    work.images.forEach((imageObj, imgIndex) => {
                        const thumb = document.createElement('img');
                        thumb.src = imageObj.src;
                        thumb.classList.add('thumbnail');
                        if (imgIndex === 0) {
                            thumb.classList.add('active');
                        }
                        thumb.addEventListener('click', () => {
                            switchImage(imageObj, thumb);
                        });
                        thumbnailContainer.appendChild(thumb);
                    });
                    
                    mainImage.style.opacity = 1;
                    workTitle.style.opacity = 1;
                    workDescription.style.opacity = 1;
                    imageCaption.style.opacity = 1;
                    workLinkContainer.style.opacity = 1;
                    nodeSection.style.opacity = 1;

                }, 300); // Wait for fade out to complete
            }

            function switchImage(imageObj, activeThumb) {
                // Fade out
                mainImage.style.opacity = 0;
                imageCaption.style.opacity = 0;
                
                setTimeout(() => {
                    mainImage.src = imageObj.src;
                    imageCaption.textContent = imageObj.caption || '';
                    // Update active thumbnail
                    document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
                    activeThumb.classList.add('active');
                    // Fade in
                    mainImage.style.opacity = 1;
                    imageCaption.style.opacity = 1;
                }, 150);
            }

            function showNextWork() {
                currentWorkIndex = (currentWorkIndex + 1) % worksData.length;
                loadWork(currentWorkIndex);
            }

            function showPrevWork() {
                currentWorkIndex = (currentWorkIndex - 1 + worksData.length) % worksData.length;
                loadWork(currentWorkIndex);
            }

            // --- â–¼â–¼â–¼ Event Listeners for Modal â–¼â–¼â–¼ ---

            function closeModal() {
                modal.classList.add('hidden');
                modalImage.classList.remove('zoomed');
                modalImage.style.transformOrigin = 'center center';
            }

            nodeImage.addEventListener('click', () => {
                modalImage.src = nodeImage.src;
                modal.classList.remove('hidden');
            });

            modalClose.addEventListener('click', closeModal);

            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
                    closeModal();
                }
            });

            modalImage.addEventListener('dblclick', function(e) {
                if (this.classList.contains('zoomed')) {
                    this.classList.remove('zoomed');
                    this.style.transformOrigin = 'center center';
                } else {
                    const rect = this.getBoundingClientRect();
                    const x = ((e.clientX - rect.left) / rect.width) * 100;
                    const y = ((e.clientY - rect.top) / rect.height) * 100;
                    this.style.transformOrigin = `${x}% ${y}%`;
                    this.classList.add('zoomed');
                }
            });

            // --- â–²â–²â–² End of Modal Listeners â–²â–²â–² ---

            // Event Listeners
            nextWorkBtn.addEventListener('click', showNextWork);
            prevWorkBtn.addEventListener('click', showPrevWork);

            // Initial Load
            loadWork(currentWorkIndex);
        });
    </script>
</body>
</html>

